# AttentionLive Staking Guide

## Overview

AttentionLive 质押系统允许主播质押 ATT 代币来创建直播任务，并根据观众参与度获得奖励。观众通过观看直播并完成验证获得积分，可以兑换成 ATT 代币。

## 功能特性

### 主播质押 (Streamer Staking)

1. **创建直播任务**
   - 质押 ATT 代币（最低 1000 ATT）
   - 设置直播时长（5分钟 - 24小时）
   - 设置奖励率（1% - 50%）

2. **获得奖励**
   - 基于观众参与度计算奖励
   - 观众越多，奖励越高
   - 最高可获得质押金额的 50% 作为奖励

3. **提取质押**
   - 直播结束后领取奖励
   - 7天冷却期后可提取质押代币
   - 平台收取 5% 手续费

### 观众奖励 (Viewer Rewards)

1. **获得积分**
   - 观看直播并完成验证码验证
   - 每次验证成功获得固定积分
   - 积分累积在链上账户

2. **兑换代币**
   - 1000 积分 = 1 ATT 代币
   - 最低兑换 1000 积分
   - 1小时冷却期

## 使用流程

### 主播端

1. **准备工作**
   - 连接钱包（BSC 测试网）
   - 确保有足够的 ATT 代币
   - 准备好直播内容

2. **创建任务**
   ```
   访问 /staking 页面
   → 选择 "Streamer Staking" 标签
   → 输入质押金额、时长、奖励率
   → 点击 "Approve ATT" 授权代币
   → 点击 "Create Task" 创建任务
   ```

3. **开始直播**
   - 任务创建成功后开始直播
   - 在直播中分发验证码
   - 观众完成验证后积分自动记录

4. **结束任务**
   ```
   访问 /staking/my-tasks 页面
   → 找到对应任务
   → 点击 "End Task" 结束任务
   → 系统自动计算奖励
   ```

5. **领取奖励**
   ```
   任务结束后
   → 点击 "Claim Reward" 领取奖励
   → 奖励自动转入钱包
   → 7天后可提取质押代币
   ```

6. **提取质押**
   ```
   冷却期结束后
   → 点击 "Unstake" 提取质押
   → 质押代币返还到钱包
   ```

### 观众端

1. **观看直播**
   - 访问 /tasks 页面
   - 选择正在直播的任务
   - 点击进入币安直播间

2. **完成验证**
   - 在直播中获取验证码
   - 在弹窗中输入验证码
   - 验证成功获得积分

3. **查看积分**
   ```
   访问 /staking 页面
   → 选择 "Viewer Rewards" 标签
   → 查看总积分和待领取积分
   ```

4. **兑换代币**
   ```
   积分达到 1000 以上
   → 点击 "Claim Rewards"
   → ATT 代币自动转入钱包
   ```

## 奖励计算

### 主播奖励公式

```
基础奖励 = 质押金额 × 奖励率 / 10000
参与度倍数 = 总观众数 / 100
总奖励 = 基础奖励 × 参与度倍数
最大奖励 = 质押金额 × 50%
```

**示例：**
- 质押金额：10,000 ATT
- 奖励率：500 (5%)
- 总观众数：200 人

```
基础奖励 = 10,000 × 500 / 10000 = 500 ATT
参与度倍数 = 200 / 100 = 2
总奖励 = 500 × 2 = 1,000 ATT
```

### 观众积分

- 每次成功验证：固定积分（由后端配置）
- 积分兑换率：1000 积分 = 1 ATT
- 最低兑换：1000 积分

## 重要参数

| 参数 | 值 | 说明 |
|------|-----|------|
| 最低质押金额 | 1000 ATT | 创建任务的最低要求 |
| 最短直播时长 | 5 分钟 | 300 秒 |
| 最长直播时长 | 24 小时 | 86400 秒 |
| 奖励率范围 | 1% - 50% | 100 - 5000 基点 |
| 平台手续费 | 5% | 从奖励中扣除 |
| 提取冷却期 | 7 天 | 领取奖励后的等待时间 |
| 积分兑换率 | 1000:1 | 1000 积分 = 1 ATT |
| 最低兑换积分 | 1000 | 最少需要 1000 积分 |
| 兑换冷却期 | 1 小时 | 两次兑换之间的间隔 |

## 安全提示

1. **保护私钥**
   - 不要分享你的私钥
   - 使用硬件钱包更安全

2. **检查合约地址**
   - 确认合约地址正确
   - 只与官方合约交互

3. **测试网使用**
   - 当前部署在 BSC 测试网
   - 使用测试网代币，无实际价值

4. **交易确认**
   - 仔细检查交易参数
   - 确认 gas 费用合理

## 常见问题

**Q: 为什么我不能创建任务？**
A: 检查以下条件：
- ATT 余额是否足够
- 是否已授权合约
- 参数是否在有效范围内

**Q: 奖励什么时候可以领取？**
A: 直播任务结束后，调用 "End Task" 后即可领取。

**Q: 为什么不能立即提取质押？**
A: 需要等待 7 天冷却期，这是为了防止恶意行为。

**Q: 积分如何获得？**
A: 观看直播并成功验证验证码后，后端会自动添加积分到你的账户。

**Q: 兑换代币需要 gas 费吗？**
A: 是的，所有链上交易都需要支付 gas 费（BNB）。

## 技术支持

- GitHub: https://github.com/attention-live
- Discord: https://discord.gg/attention
- 文档: https://docs.attention.live
